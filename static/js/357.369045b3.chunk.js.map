{"version":3,"file":"static/js/357.369045b3.chunk.js","mappings":"yPAkGA,EAxFmB,WAClB,OAAoCA,EAAAA,EAAAA,UAAS,IAA7C,eAAOC,EAAP,KAAmBC,EAAnB,KACA,GAA4BF,EAAAA,EAAAA,UAAS,IAArC,eAAOG,EAAP,KAAeC,EAAf,KACA,GAAoCC,EAAAA,EAAAA,KAA7BC,EAAP,EAAOA,UAAWC,EAAlB,EAAkBA,QAASC,EAA3B,EAA2BA,MAErBC,GAAaC,EAAAA,EAAAA,YAAWC,EAAAA,IAE9BC,EAAAA,EAAAA,YAAU,WAMT,OALAN,EAAUH,GACRU,MAAK,SAAAC,GACLZ,EAAcY,GACdV,GAAU,SAAAW,GAAI,OAAIA,EAAO,CAAX,GACd,IACK,WACNb,EAAc,IACdO,GAAW,EACX,CAED,GAAE,KAEHG,EAAAA,EAAAA,YAAU,WACT,IAAMI,EAAQC,YAAW,kBAAMC,SAASC,iBAAiB,SAAUC,EAA1C,GAAmD,KAE5E,OAAO,WACNC,aAAaL,GACbE,SAASI,oBAAoB,SAAUF,EACvC,CACD,IAED,IAAMA,EAAS,WACd,IAAMG,EAAUL,SAASM,gBACrBD,EAAQE,cAAgBF,EAAQG,aAAeH,EAAQI,WAC1DC,GAED,EAEKA,EAAW,WAChB,IACCnB,GAAW,GACXH,EAAUH,GAAQ,GAChBU,MAAK,SAACgB,GACN3B,GAAc,SAAAa,GAAI,wBAAQA,IAAR,OAAiBc,GAAjB,IAClBzB,GAAU,SAAAW,GAAI,OAAIA,EAAO,CAAX,GACd,IACAF,MAAK,kBAAMJ,GAAW,EAAjB,IACLqB,MAAMC,EAIR,CAFD,MAAMvB,GACL,MAAM,IAAIwB,EAAAA,EAAM,iCAChB,CACD,EAEKD,EAAU,WACf7B,EAAc,IACdE,EAAU,KACV,EAEK6B,GAAcC,EAAAA,EAAAA,cAAY,WAC/B,OACC,gBAAKC,UAAU,sBAAf,UACC,wBACElC,EAAWmC,KAAI,SAACC,EAAMC,GACtB,OACC,UAAC,KAAD,CAAMH,UAAU,YAAYI,GAAE,kBAAaF,EAAKG,IAAhD,WACC,gBAAKL,UAAU,cAAcM,IAAKJ,EAAKK,UAAWC,IAAI,kBACtD,eAAIR,UAAU,aAAd,SAA4BE,EAAKO,SACjC,eAAIT,UAAU,aAAd,SAA4BE,EAAKQ,UAHyBP,EAM5D,OAIJ,GAAE,CAACrC,IAEE6C,GAASC,EAAAA,EAAAA,UAAQ,kBAAMvC,GAAQ,SAACwB,EAAA,EAAD,IAAW,IAAzB,GAA+B,CAACxB,IACjDwC,GAAWD,EAAAA,EAAAA,UAAQ,kBAAMxC,GAAU,SAAC0C,EAAA,EAAD,IAAa,IAA7B,GAAmC,CAAC1C,IACvD2C,GAAYH,EAAAA,EAAAA,UAAQ,kBAAQvC,GAASD,IAAaA,EAA0B,KAAhB0B,GAAxC,GAA8D,CAACzB,EAAOD,EAAS0B,IAEzG,OACC,iBAAKE,UAAU,UAAf,UACEW,EACAI,EACAF,IAGH,ECpFD,EATe,WACd,OACC,iBAAKb,UAAU,SAAf,WACC,SAACgB,EAAA,EAAD,KACA,SAAC,EAAD,MAGF,C,gFCNc,SAASC,EAAmBC,GACzC,OCJa,SAA4BA,GACzC,GAAIC,MAAMC,QAAQF,GAAM,OAAO,EAAAG,EAAA,GAAiBH,EAClD,CDES,CAAkBA,IELZ,SAA0BI,GACvC,GAAsB,qBAAXC,QAAmD,MAAzBD,EAAKC,OAAOC,WAA2C,MAAtBF,EAAK,cAAuB,OAAOH,MAAMM,KAAKH,EACtH,CFGmC,CAAgBJ,KAAQ,EAAAQ,EAAA,GAA2BR,IGLvE,WACb,MAAM,IAAIS,UAAU,uIACtB,CHG8F,EAC9F,C","sources":["components/ComicsList/ComicsList.jsx","components/pages/Comics/Comics.jsx","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"sourcesContent":["import { useState, useEffect, useMemo, useCallback, useContext} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport useMarvelService from \"../../services/marvelService\";\r\nimport Error from \"../Error/Error\";\r\nimport Spinner from \"../Spinner/Spinner\";\r\nimport { Link } from 'react-router-dom';\r\nimport { spinnerContext } from \"../../context/сontext\";\r\n\r\nimport \"./ComicsList.css\"\r\n\r\nconst ComicsList = () => {\r\n\tconst [comicsList, setComicsList] = useState([]);\r\n\tconst [offset, setOffset] = useState(16);\r\n\tconst {getComics, loading, error} = useMarvelService();\r\n\r\n\tconst setSpinner = useContext(spinnerContext);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetComics(offset)\r\n\t\t\t.then(comics => {\r\n\t\t\t\tsetComicsList(comics)\r\n\t\t\t\tsetOffset(prev => prev + 8)\r\n\t\t\t})\r\n\t\treturn () => {\r\n\t\t\tsetComicsList([])\r\n\t\t\tsetSpinner(false)\r\n\t\t}\t\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst timer = setTimeout(() => document.addEventListener(\"scroll\", bottom), 100)\r\n\r\n\t\treturn () => {\r\n\t\t\tclearTimeout(timer)\r\n\t\t\tdocument.removeEventListener(\"scroll\", bottom)\r\n\t\t}\r\n\t})\r\n\r\n\tconst bottom = () => {\r\n\t\tconst element = document.documentElement;\r\n\t\tif (element.scrollHeight <= element.clientHeight + element.scrollTop) {\r\n\t\t\tloadMore()\r\n\t\t}\r\n\t}\r\n\r\n\tconst loadMore = () => {\r\n\t\ttry {\r\n\t\t\tsetSpinner(true)\r\n\t\t\tgetComics(offset, false)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tsetComicsList(prev => [...prev, ...res])\r\n\t\t\t\t\tsetOffset(prev => prev + 8)\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => setSpinner(false))\r\n\t\t\t\t.catch(onError)\r\n\t\t}\r\n\t\tcatch(error) {\r\n\t\t\tthrow new Error(\"Couldn't load from the server!\")\r\n\t\t}\r\n\t}\r\n\r\n\tconst onError = () => {\r\n\t\tsetComicsList([]);\r\n\t\tsetOffset(null);\r\n\t}\r\n\r\n\tconst renderItems = useCallback(() => {\r\n\t\treturn (\r\n\t\t\t<div className=\"comics-list-wrapper\">\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t{comicsList.map((item, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Link className=\"list-item\" to={`/comics/${item.id}`} key={index}>\r\n\t\t\t\t\t\t\t\t<img className=\"item-avatar\" src={item.thumbnail} alt=\"char preview\"/>\r\n\t\t\t\t\t\t\t\t<h4 className=\"item-title\">{item.title}</h4>\r\n\t\t\t\t\t\t\t\t<h5 className=\"item-price\">{item.price}</h5>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}, [comicsList])\r\n\r\n\tconst _error = useMemo(() => error ? <Error/> : null, [error]);\r\n\tconst _loading = useMemo(() => loading ? <Spinner/> : null, [loading]);\r\n\tconst _contents = useMemo(() => !(error || loading) || !loading ? renderItems() : null, [error, loading, renderItems]);\r\n\r\n\treturn (\r\n\t\t<div className=\"wrapper\">\r\n\t\t\t{_error}\r\n\t\t\t{_contents}\r\n\t\t\t{_loading}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ComicsList;\r\n","import Ads from \"../../Ads/Ads\";\r\nimport ComicsList from \"../../ComicsList/ComicsList\";\r\n\r\nconst Comics = () => {\r\n\treturn (\r\n\t\t<div className=\"comics\">\r\n\t\t\t<Ads/>\r\n\t\t\t<ComicsList/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Comics;","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"names":["useState","comicsList","setComicsList","offset","setOffset","useMarvelService","getComics","loading","error","setSpinner","useContext","spinnerContext","useEffect","then","comics","prev","timer","setTimeout","document","addEventListener","bottom","clearTimeout","removeEventListener","element","documentElement","scrollHeight","clientHeight","scrollTop","loadMore","res","catch","onError","Error","renderItems","useCallback","className","map","item","index","to","id","src","thumbnail","alt","title","price","_error","useMemo","_loading","Spinner","_contents","Ads","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError"],"sourceRoot":""}