"use strict";(self.webpackChunkmarvel_wiki=self.webpackChunkmarvel_wiki||[]).push([[357],{357:function(n,e,t){t.r(e),t.d(e,{default:function(){return h}});var r=t(884),i=t(982),c=t(885),u=t(791),o=t(696),a=t(515),s=t(702),l=t(504),f=t(456),m=t(184),d=function(){var n=(0,u.useState)([]),e=(0,c.Z)(n,2),t=e[0],r=e[1],d=(0,u.useState)(16),h=(0,c.Z)(d,2),v=h[0],p=h[1],j=(0,o.Z)(),w=j.getComics,x=j.loading,b=j.error,Z=(0,u.useContext)(f.m);(0,u.useEffect)((function(){return w(v).then((function(n){r(n),p((function(n){return n+8}))})),function(){r([]),Z(!1)}}),[]),(0,u.useEffect)((function(){var n=setTimeout((function(){return document.addEventListener("scroll",y)}),100);return function(){clearTimeout(n),document.removeEventListener("scroll",y)}}));var y=function(){var n=document.documentElement;document.body.scrollHeight<=window.innerHeight+n.scrollTop&&k()},k=function(){try{Z(!0),w(v,!1).then((function(n){r((function(e){return[].concat((0,i.Z)(e),(0,i.Z)(n))})),p((function(n){return n+8}))})).then((function(){return Z(!1)})).catch(N)}catch(b){throw new a.Z("Couldn't load from the server!")}},N=function(){r([]),p(null)},C=(0,u.useCallback)((function(){return(0,m.jsx)("div",{className:"comics-list-wrapper",children:(0,m.jsx)("ul",{children:t.map((function(n,e){return(0,m.jsxs)(l.rU,{className:"list-item",to:"/comics/".concat(n.id),children:[(0,m.jsx)("img",{className:"item-avatar",src:n.thumbnail,alt:"char preview"}),(0,m.jsx)("h4",{className:"item-title",children:n.title}),(0,m.jsx)("h5",{className:"item-price",children:n.price})]},e)}))})})}),[t]),E=(0,u.useMemo)((function(){return b?(0,m.jsx)(a.Z,{}):null}),[b]),g=(0,u.useMemo)((function(){return x?(0,m.jsx)(s.Z,{}):null}),[x]),S=(0,u.useMemo)((function(){return(b||x)&&x?null:C()}),[b,x,C]);return(0,m.jsxs)("div",{className:"wrapper",children:[E,S,g]})},h=function(){return(0,m.jsxs)("div",{className:"comics",children:[(0,m.jsx)(r.Z,{}),(0,m.jsx)(d,{})]})}},982:function(n,e,t){t.d(e,{Z:function(){return c}});var r=t(907);var i=t(181);function c(n){return function(n){if(Array.isArray(n))return(0,r.Z)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||(0,i.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=357.e5eb62e2.chunk.js.map